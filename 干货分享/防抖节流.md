# 防抖节流

    // 防抖 注意 接收的是一个 function 而不是 箭头函数 \[ this 指向 修正 需要 \]

    export const debounce = function(callback: Function, delay: number, immediate: boolean | undefined) {

    if (typeof callback !== "function") {

    throw new TypeError("callback不是函数")

    }

    let timer = null

    return function(...args) {

    if (timer !== null) {

    clearTimeout(timer)

    }

    if (immediate) {

    var callNow = !timer

    timer = setTimeout(() => {

    timer = null

    }, delay)

    if (callNow) callback.apply(this, args)

    } else {

    timer = setTimeout(() => {

    if (callback) {

    // eslint-disable-next-line no-invalid-this

    callback.apply(this, args)

    }

    }, delay)

    }

    }

    }

    // 防抖用法： debounce(function() {

    //do something

    },200)

    // 节流 注意 接收的是一个 function 而不是 箭头函数 \[ this 指向 修正 需要 \]

    export const throttle = function(callback: Function, delay: number, immediate: boolean = true) {

    if (typeof callback !== "function") {

    throw new TypeError("callback不是函数")

    }

    let timer = null

    return function(...args) {

    if (timer) {

    return

    }

    immediate && callback.apply(this, args)

    timer = setTimeout(() => {

    if (!immediate && callback) {

    // eslint-disable-next-line no-invalid-this

    callback.apply(this, args)

    }

    timer = null

    }, delay)

    }

    }

    // 节流用法：

    // 点击购买按钮

    const handleBuyClick = throttle(() => {

    // 调用购买接口。。。。。

    },2000,true)

